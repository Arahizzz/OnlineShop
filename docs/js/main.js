!function(t){var e={};function n(o){if(e[o])return e[o].exports;var r=e[o]={i:o,l:!1,exports:{}};return t[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=t,n.c=e,n.d=function(t,e,o){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)n.d(o,r,function(e){return t[e]}.bind(null,r));return o},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="",n(n.s=0)}([function(t,e,n){"use strict";n.r(e);n(1);Vue.use(Vuex);var o=new Vuex.Store({state:{showModal:!1,categories:[{name:"Category",cells:[]}],cart:{counter:0,totalPrice:0,goods:[]}},plugins:[createPersistedState({paths:["cart"]})],mutations:{toggleModal:function(){this.state.showModal=!this.state.showModal},updateCategories:function(t,e){this.state.categories=e},updateCart:function(t,e){this.state.cart.goods=e,o.commit("updateCartCounter")},replaceCart:function(t,e){this.state.cart=e,o.commit("updateCartCounter")},updateCartCounter:function(){var t=0,e=0;this.state.cart.goods.forEach((function(n){t+=n.quantity,e+=n.price*n.quantity})),this.state.cart.counter=t,this.state.cart.totalPrice=e}},actions:{fetchData:function(t){fetch("https://nit.tron.net.ua/api/category/list").then((function(t){t.json().then((function(t){var e=[];t.forEach((function(t){fetch("https://nit.tron.net.ua/api/product/list/category/"+t.id).then((function(n){return n.json().then((function(n){var o={name:t.name,cells:n.map((function(t){return{name:t.name,img_url:t.image_url,id:t.id,price:null!=t.special_price?t.special_price:t.price,old_price:null!=t.special_price?t.price:null}}))};e.push(o)}))}))})),o.commit("updateCategories",e)}))}))}}});o.dispatch("fetchData");new Vue({store:o,el:"#goods",computed:{categories:function(){return o.state.categories}}});Vue.component("cell",{props:["cell"],methods:{addToCart:function(t){for(var e={name:t.name,img_url:t.img_url,id:t.id,price:t.price,quantity:1},n=o.state.cart.goods,r=0;r<n.length;r++)if(n[r].id==e.id)return n[r].quantity++,void o.commit("updateCartCounter");n.push(e),o.commit("updateCart",n)}},template:'\n    <div class="cell">\n    <img :src="cell.img_url" alt="">\n    <div class="bottom">\n        <p><a class=goodName href=\'useless.html\'>{{cell.name}}</a></p>\n        <div><s v-if="cell.old_price != null" class=\'old_price\'>{{cell.old_price}}</s></div>\n        <p><span class="price">{{cell.price}}</span><button v-on:click="addToCart(cell)">Купити</button></p>\n    </div>\n    </div>\n    '}),Vue.component("cart-item",{props:["item","index"],methods:{removeItem:function(t){var e=o.state.cart.goods;e.splice(t,1),o.commit("updateCart",e)},increment:function(t){var e=o.state.cart.goods;e[t].quantity++,o.commit("updateCart",e)},decrement:function(t){var e=o.state.cart.goods;e[t].quantity>1&&(e[t].quantity--,o.commit("updateCart",e))}},template:'\n    <div class="good">\n        <div>\n            <p class="cartIndex">{{index + 1}}</p>\n            <img :src="item.img_url"> \n            <div>\n            <p>{{item.name}}</p>\n            <p class="price">{{item.price}}</p>\n            </div>\n            </div>\n            <div>\n            <p v-on:click="decrement(index)" class="minus">-</p>\n            <p class="quantity">{{item.quantity}}</p>\n            <p v-on:click="increment(index)" class="plus">+</p>\n            <img v-on:click="removeItem(index)" class="removeButton" src="https://img.icons8.com/wired/64/000000/filled-trash.png">\n        </div>\n    </div>\n    '});new Vue({el:"#cart",computed:{counter:function(){return o.state.cart.counter}},methods:{toggleModal:function(){o.commit("toggleModal")}}}),new Vue({el:"#myModal",methods:{toggleModal:function(){o.commit("toggleModal")},clearCart:function(){o.commit("replaceCart",{counter:0,totalPrice:0,goods:[]})}},computed:{displayModal:function(){return o.state.showModal},totalPrice:function(){return o.state.cart.totalPrice},goodsInCart:function(){return o.state.cart.goods},displayBottom:function(){return o.state.cart.counter>0}}})},function(t,e,n){}]);